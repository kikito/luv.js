<!doctype html>
<html>
<head>
  <title>Refreshing Bubbles!</title>
  <script src="../luv.js"></script>
</head>
<body>
  <script>
    var luv = Luv();

    var rand = function(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    };

    var newBubble = function() {
      return {
        x : rand(25,775),
        y : rand(650,800),
        r : rand(10, 40),
        vy: rand(30, 80)
      };
    };

    var bubbles = [];

    luv.load = function() {
      for(var i=1; i<100; i++) {
        bubbles.push(newBubble());
      }
      luv.graphics.setBackgroundColor(255,0,30);
    };

    luv.update = function(dt) {
      var bubble;

      for(var i=0; i < bubbles.length; i++) {
        bubble = bubbles[i];
        bubble.y -= bubble.vy * dt;

        if(bubble.y < -50) {
          bubbles[i] = newBubble();
        }
      }
    };

    luv.draw = function() {
      var bubble;

      for(var i=0; i < bubbles.length; i++) {
        bubble = bubbles[i];
        luv.graphics.setColor(255,98,0);
        luv.graphics.circle('fill', bubble.x, bubble.y, bubble.r);

        luv.graphics.setLineWidth(bubble.r/7.0);
        luv.graphics.setColor(255,225,200);
        luv.graphics.circle('line', bubble.x, bubble.y, bubble.r);

        luv.graphics.circle('fill',
          bubble.x - bubble.r/2,
          bubble.y - bubble.r/2.5,
          bubble.r / 3);
      }

      luv.graphics.setColor(255,225,255);
      var fps = Math.round(luv.timer.getFPS());
      luv.graphics.print("FPS: " + fps, 760, 10);
    };

    luv.run();

  </script>
</body>
</html>
