/*! luv 0.0.1 (2013-02-06) - https://github.com/kikito/luv.js */
/*! Minimal HTML5 game development lib */
/*! Enrique Garcia Cota */
(function(){Luv=function(t){t=t||{};var e=t.el,i=t.el_id,n=t.width,r=t.height;!e&&i&&(e=document.getElementById(i)),this.graphics=new Luv.Graphics(e,n,r)};var t=Luv.prototype;t.update=function(){},t.draw=function(){},t.load=function(){},t.run=function(){var t=this;t.load();var e=function(i){t.update(i),t.graphics.clear(),t.draw(),window.requestAnimationFrame(e)};e(0)},Luv.Graphics=function(t,e,i){t?(!e&&t.getAttribute("width")&&(e=parseInt(t.getAttribute("width"),10)),!i&&t.getAttribute("height")&&(i=parseInt(t.getAttribute("height"),10))):(t=document.createElement("canvas"),document.getElementsByTagName("body")[0].appendChild(t)),e=e||800,i=i||600,t.setAttribute("width",e),t.setAttribute("height",i),this.el=t,this.width=e,this.height=i,this.color={},this.backgroundColor={},this.setColor(255,255,255),this.setBackgroundColor(0,0,0),this.ctx=t.getContext("2d")};var e=function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=function(t,i,n,r,o,a){var c=t[i];e(n)?(c.r=n[0],c.g=n[1],c.b=n[2],c.a=n[3]||255):(c.r=n,c.g=r,c.b=o,c.a=a||255),t[i+"Style"]="rgba("+[c.r,c.g,c.b,c.a/255].join()+")"},n=function(t){return[t.r,t.g,t.b,t.a]},r=function(t){switch(t){case"fill":this.ctx.fillStyle=this.colorStyle,this.ctx.fill();break;case"line":this.ctx.strokeStyle=this.colorStyle,this.ctx.stroke();break;default:throw Error("Invalid mode: ["+t+']. Should be "fill" or "line"')}},o=function(t,e,i){if(e>i.length)throw Error(t+" requires at least 4 parameters");if(1==i.length%2)throw Error(t+" requires an even number of parameters");this.ctx.moveTo(i[0],i[1]);for(var n=2;i.length>n;n+=2)this.ctx.lineTo(i[n],i[n+1]);this.ctx.stroke()},a=Luv.Graphics.prototype;a.setColor=function(t,e,n,r){i(this,"color",t,e,n,r)},a.getColor=function(){return n(this.color)},a.setBackgroundColor=function(t,e,n,r){i(this,"backgroundColor",t,e,n,r)},a.getBackgroundColor=function(){return n(this.backgroundColor)},a.clear=function(){this.ctx.fillStyle=this.backgroundColorStyle,this.ctx.fillRect(0,0,this.width,this.height)},a.print=function(t,e,i){this.ctx.fillStyle=this.colorStyle,this.ctx.fillText(t,e,i)},a.line=function(){var t=e(arguments[0])?arguments[0]:arguments;this.ctx.beginPath(),o.call(this,"luv.graphics.line",4,t),r.call(this,"line")},a.rectangle=function(t,e,i,n,o){this.ctx.beginPath(),this.ctx.rect(e,i,n,o),r.call(this,t),this.ctx.closePath()},a.polygon=function(){var t=arguments[0],i=arguments[1];if(!e(i)){i=[];for(var n=1;arguments.length>n;n++)i[n-1]=arguments[n]}this.ctx.beginPath(),o.call(this,"luv.graphics.polygon",6,i),r.call(this,t),this.ctx.closePath()},function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;e.length>i&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),r=window.setTimeout(function(){e(i+n)},n);return t=i+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()})();