/*! luv 0.0.1 (2013-02-08) - https://github.com/kikito/luv.js */
/*! Minimal HTML5 game development lib */
/*! Enrique Garcia Cota */
(function(){(function(){for(var t=0,i=["ms","moz","webkit","o"],e=0;i.length>e&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(i){var e=(new Date).getTime(),n=Math.max(0,16-(e-t)),r=window.setTimeout(function(){i(e+n)},n);return t=e+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})(),Luv=function(t){t=t||{};var i=t.el,e=t.el_id,n=t.width,r=t.height;!i&&e&&(i=document.getElementById(e)),this.graphics=new Luv.Graphics(i,n,r),this.timer=new Luv.Timer};var t=Luv.prototype;t.update=function(){},t.draw=function(){},t.load=function(){},t.run=function(){var t=this;t.load();var i=function(e){t.timer.step(e),t.update(t.timer.getDeltaTime()),t.graphics.clear(),t.draw(),window.requestAnimationFrame(i)};i(t.timer.getMicroTime())},Luv.Graphics=function(t,i,e){t?(!i&&t.getAttribute("width")&&(i=parseInt(t.getAttribute("width"),10)),!e&&t.getAttribute("height")&&(e=parseInt(t.getAttribute("height"),10))):(t=document.createElement("canvas"),document.getElementsByTagName("body")[0].appendChild(t)),i=i||800,e=e||600,t.setAttribute("width",i),t.setAttribute("height",e),this.el=t,this.width=i,this.height=e,this.color={},this.backgroundColor={},this.setColor(255,255,255),this.setBackgroundColor(0,0,0),this.ctx=t.getContext("2d")};var i=2*Math.PI,e=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=function(t,i,n,r,o,a){var c=t[i];e(n)?(c.r=n[0],c.g=n[1],c.b=n[2],c.a=n[3]||255):(c.r=n,c.g=r,c.b=o,c.a=a||255),t[i+"Style"]="rgba("+[c.r,c.g,c.b,c.a/255].join()+")"},r=function(t){return[t.r,t.g,t.b,t.a]},o=function(t){switch(t){case"fill":this.ctx.fillStyle=this.colorStyle,this.ctx.fill();break;case"line":this.ctx.strokeStyle=this.colorStyle,this.ctx.stroke();break;default:throw Error("Invalid mode: ["+t+']. Should be "fill" or "line"')}},a=function(t,i,e){if(i>e.length)throw Error(t+" requires at least 4 parameters");if(1==e.length%2)throw Error(t+" requires an even number of parameters");this.ctx.moveTo(e[0],e[1]);for(var n=2;e.length>n;n+=2)this.ctx.lineTo(e[n],e[n+1]);this.ctx.stroke()},c=Luv.Graphics.prototype;c.setColor=function(t,i,e,r){n(this,"color",t,i,e,r)},c.getColor=function(){return r(this.color)},c.setBackgroundColor=function(t,i,e,r){n(this,"backgroundColor",t,i,e,r)},c.getBackgroundColor=function(){return r(this.backgroundColor)},c.setLineWidth=function(t){this.ctx.lineWidth=t},c.getLineWidth=function(){return this.ctx.lineWidth},c.setLineCap=function(t){if("butt"!=t&&"round"!=t&&"square"!=t)throw Error("Line cap must be either 'butt', 'round' or 'square'");this.ctx.lineCap=t},c.getLineCap=function(){return this.ctx.lineCap},c.clear=function(){this.ctx.fillStyle=this.backgroundColorStyle,this.ctx.fillRect(0,0,this.width,this.height)},c.print=function(t,i,e){this.ctx.fillStyle=this.colorStyle,this.ctx.fillText(t,i,e)},c.line=function(){var t=e(arguments[0])?arguments[0]:arguments;this.ctx.beginPath(),a.call(this,"luv.graphics.line",4,t),o.call(this,"line")},c.rectangle=function(t,i,e,n,r){this.ctx.beginPath(),this.ctx.rect(i,e,n,r),o.call(this,t),this.ctx.closePath()},c.polygon=function(){var t=arguments[0],i=arguments[1];if(!e(i)){i=[];for(var n=1;arguments.length>n;n++)i[n-1]=arguments[n]}this.ctx.beginPath(),a.call(this,"luv.graphics.polygon",6,i),o.call(this,t),this.ctx.closePath()},c.circle=function(t,e,n,r){this.arc(t,e,n,r,0,i),this.ctx.closePath()},c.arc=function(t,i,e,n,r,a){this.ctx.beginPath(),this.ctx.arc(i,e,n,r,a,!1),o.call(this,t)},Luv.Timer=function(){this.microTime=(new Date).getTime(),this.deltaTime=0};var s=Luv.Timer.prototype;s.step=function(t){t>this.microTime&&(this.deltaTime=t-this.microTime,this.microTime=t)},s.getMicroTime=function(){return this.microTime},s.getTime=function(){return this.microTime/1e3},s.getDeltaTime=function(){return this.deltaTime/1e3},Luv.Keyboard=function(t){t.tabIndex=1,this.keysDown={};var i=this;t.onkeydown=function(t){var e=t.which,n=String.fromCharCode(e);i.keysDown[n]=!0,i.onkeydown(n,e)},t.onkeyup=function(t){var e=t.which,n=String.fromCharCode(e);i.keysDown[n]=!1,i.onkeyup(n,e)}};var h=Luv.Keyboard.prototype;h.onkeyup=function(){},h.onkeydown=function(){},h.isDown=function(t){return!!this.keysDown[t]}})();